# Activity #1

Add the below tool to the [`server.py`](./server.py) file (replace the placeholder YOUR_MCP_TOOL):

```python
@mcp.tool()
def country_info(country_name: str) -> dict:
    """Get information about a country"""
    import requests
    # search for articles
    search_url = f"https://restcountries.com/v3.1/name/{country_name}"
    response = requests.get(search_url)
    data = response.json()[0]
    return {
        "search_url": search_url,
        "name": data["name"]["common"],
        "capital": data.get("capital", ["N/A"])[0],
        "population": data["population"],
        "currency": list(data.get("currencies", {}).keys())[0] if data.get("currencies") else "N/A"
    }
```

There after run the server:
```bash
python test_server.py
```

And you see the below output as the [`test_server.py`](./test_server.py), calls three tools and one of them is the above `country_info` tool:
```bash
‚ùØ python test_server.py
[08/07/25 23:35:27] INFO     Processing request of type ListToolsRequest                                                       server.py:625
Available tools: [Tool(name='web_search', title=None, description='Search the web for information about the given query', inputSchema={'properties': {'query': {'title': 'Query', 'type': 'string'}}, 'required': ['query'], 'title': 'web_searchArguments', 'type': 'object'}, outputSchema={'properties': {'result': {'title': 'Result', 'type': 'string'}}, 'required': ['result'], 'title': 'web_searchOutput', 'type': 'object'}, annotations=None, meta=None), Tool(name='roll_dice', title=None, description='Roll the dice with the given notation', inputSchema={'properties': {'notation': {'title': 'Notation', 'type': 'string'}, 'num_rolls': {'default': 1, 'title': 'Num Rolls', 'type': 'integer'}}, 'required': ['notation'], 'title': 'roll_diceArguments', 'type': 'object'}, outputSchema={'properties': {'result': {'title': 'Result', 'type': 'string'}}, 'required': ['result'], 'title': 'roll_diceOutput', 'type': 'object'}, annotations=None, meta=None), Tool(name='country_info', title=None, description='Get information about a country', inputSchema={'properties': {'country_name': {'title': 'Country Name', 'type': 'string'}}, 'required': ['country_name'], 'title': 'country_infoArguments', 'type': 'object'}, outputSchema=None, annotations=None, meta=None)]

                    INFO     Processing request of type CallToolRequest                                                        server.py:625
Result: CallToolResult(content=[TextContent(type='text', text='[{"url": "https://en.wikipedia.org/wiki/Paris", "content": "Paris is the capital and largest city of France. With an estimated population of 2,048,472 in January 2025 in an area of more than 105 km2 (41 sq mi),"}, {"url": "https://home.adelphi.edu/~ca19535/page%204.html", "content": "Paris, France   ## Paris facts: Paris, the **capital of France** Paris is the **capital of France**, Paris has 2.234 million inhabitants ## Paris facts: Paris history Republic, Paris has a rich 2000 year history. See details of Paris churches, including Notre ## Paris facts: Paris, a world city Paris is a world capital city of shopping french fashion brands. All of this turns Paris into a ## Paris facts: the capital of France in history Before Paris, the capital of France Paris first became the capital of France in France, Paris retrieved its status of capital of France under King can see remains of the Philippe August Paris walls in the parking and Louvre Museum Paris remained the capital of"}, {"url": "https://www.cia-france.com/french-kids-teenage-courses/paris-school/visit-paris", "content": "# Paris ## Paris is the city of romance par excellence, the fashion capital and the best example of French art de vivre. Paris is the city of romance par excellence, the fashion capital and the best example of French art de vivre. Exploring Paris is an essential rite of passage for anyone who decides to learn French and get to know France. ## Paris, a perfect program for teens ## Discover our French summer camps in France Premium summer language camp for students aged 8 to 17 years. Summer language camp for students aged 12 to 17 years, including an independence programme for 16 and 17 year olds. Summer language camp for students aged 12 to 17 years."}, {"url": "https://www.britannica.com/place/Paris", "content": "Paris Paris **Paris**, city and capital of France, situated in the north-central part of the country. Image 20: Paris Paris(more) For centuries Paris has been one of the world\\u2019s most important and attractive cities. Image 21: Paris, France Image 24: Paris Image 27: Paris Street; Rainy Day and a vision of the modern city Over the centuries, as Paris expanded outward from the \\u00cele de la Cit\\u00e9, various walls were built to enclose parts of the city. Situated in the Seine in the centre of Paris, the ship-shaped \\u00cele de la Cit\\u00e9 is the historical heart of the city. Image 30: Notre-Dame de Paris Image 32: Notre-Dame de Paris \\"Paris\\"."}, {"url": "https://www.coe.int/en/web/interculturalcities/paris", "content": "Paris, France - Intercultural City - Intercultural Cities Programme Council of Europe Human Rights Human Rights Online resources Human Rights Online resources # Intercultural Cities Programme - What is an intercultural city? - Intercultural Regions - Index reports per city - Intercultural profiles 2. Intercultural Cities Programme 4. Paris # Paris, France - Intercultural City Paris is the capital and most populous city of France. The City of Paris has an area of 105\\u00a0km\\u00b2 and a population of 2,241,346 (2014 estimate). #### International Intercultural Cities Network - Paris Intercultural profile Intercultural Cities Index - Paris\\u00a0city official website - Paris Facebook page - Private office of the Secretary General - Online bookshop - Online resources **Council of Europe**,"}]', annotations=None, meta=None)], structured_content={'result': '[{"url": "https://en.wikipedia.org/wiki/Paris", "content": "Paris is the capital and largest city of France. With an estimated population of 2,048,472 in January 2025 in an area of more than 105 km2 (41 sq mi),"}, {"url": "https://home.adelphi.edu/~ca19535/page%204.html", "content": "Paris, France   ## Paris facts: Paris, the **capital of France** Paris is the **capital of France**, Paris has 2.234 million inhabitants ## Paris facts: Paris history Republic, Paris has a rich 2000 year history. See details of Paris churches, including Notre ## Paris facts: Paris, a world city Paris is a world capital city of shopping french fashion brands. All of this turns Paris into a ## Paris facts: the capital of France in history Before Paris, the capital of France Paris first became the capital of France in France, Paris retrieved its status of capital of France under King can see remains of the Philippe August Paris walls in the parking and Louvre Museum Paris remained the capital of"}, {"url": "https://www.cia-france.com/french-kids-teenage-courses/paris-school/visit-paris", "content": "# Paris ## Paris is the city of romance par excellence, the fashion capital and the best example of French art de vivre. Paris is the city of romance par excellence, the fashion capital and the best example of French art de vivre. Exploring Paris is an essential rite of passage for anyone who decides to learn French and get to know France. ## Paris, a perfect program for teens ## Discover our French summer camps in France Premium summer language camp for students aged 8 to 17 years. Summer language camp for students aged 12 to 17 years, including an independence programme for 16 and 17 year olds. Summer language camp for students aged 12 to 17 years."}, {"url": "https://www.britannica.com/place/Paris", "content": "Paris Paris **Paris**, city and capital of France, situated in the north-central part of the country. Image 20: Paris Paris(more) For centuries Paris has been one of the world\\u2019s most important and attractive cities. Image 21: Paris, France Image 24: Paris Image 27: Paris Street; Rainy Day and a vision of the modern city Over the centuries, as Paris expanded outward from the \\u00cele de la Cit\\u00e9, various walls were built to enclose parts of the city. Situated in the Seine in the centre of Paris, the ship-shaped \\u00cele de la Cit\\u00e9 is the historical heart of the city. Image 30: Notre-Dame de Paris Image 32: Notre-Dame de Paris \\"Paris\\"."}, {"url": "https://www.coe.int/en/web/interculturalcities/paris", "content": "Paris, France - Intercultural City - Intercultural Cities Programme Council of Europe Human Rights Human Rights Online resources Human Rights Online resources # Intercultural Cities Programme - What is an intercultural city? - Intercultural Regions - Index reports per city - Intercultural profiles 2. Intercultural Cities Programme 4. Paris # Paris, France - Intercultural City Paris is the capital and most populous city of France. The City of Paris has an area of 105\\u00a0km\\u00b2 and a population of 2,241,346 (2014 estimate). #### International Intercultural Cities Network - Paris Intercultural profile Intercultural Cities Index - Paris\\u00a0city official website - Paris Facebook page - Private office of the Secretary General - Online bookshop - Online resources **Council of Europe**,"}]'}, data=web_searchOutput(result='[{"url": "https://en.wikipedia.org/wiki/Paris", "content": "Paris is the capital and largest city of France. With an estimated population of 2,048,472 in January 2025 in an area of more than 105 km2 (41 sq mi),"}, {"url": "https://home.adelphi.edu/~ca19535/page%204.html", "content": "Paris, France   ## Paris facts: Paris, the **capital of France** Paris is the **capital of France**, Paris has 2.234 million inhabitants ## Paris facts: Paris history Republic, Paris has a rich 2000 year history. See details of Paris churches, including Notre ## Paris facts: Paris, a world city Paris is a world capital city of shopping french fashion brands. All of this turns Paris into a ## Paris facts: the capital of France in history Before Paris, the capital of France Paris first became the capital of France in France, Paris retrieved its status of capital of France under King can see remains of the Philippe August Paris walls in the parking and Louvre Museum Paris remained the capital of"}, {"url": "https://www.cia-france.com/french-kids-teenage-courses/paris-school/visit-paris", "content": "# Paris ## Paris is the city of romance par excellence, the fashion capital and the best example of French art de vivre. Paris is the city of romance par excellence, the fashion capital and the best example of French art de vivre. Exploring Paris is an essential rite of passage for anyone who decides to learn French and get to know France. ## Paris, a perfect program for teens ## Discover our French summer camps in France Premium summer language camp for students aged 8 to 17 years. Summer language camp for students aged 12 to 17 years, including an independence programme for 16 and 17 year olds. Summer language camp for students aged 12 to 17 years."}, {"url": "https://www.britannica.com/place/Paris", "content": "Paris Paris **Paris**, city and capital of France, situated in the north-central part of the country. Image 20: Paris Paris(more) For centuries Paris has been one of the world\\u2019s most important and attractive cities. Image 21: Paris, France Image 24: Paris Image 27: Paris Street; Rainy Day and a vision of the modern city Over the centuries, as Paris expanded outward from the \\u00cele de la Cit\\u00e9, various walls were built to enclose parts of the city. Situated in the Seine in the centre of Paris, the ship-shaped \\u00cele de la Cit\\u00e9 is the historical heart of the city. Image 30: Notre-Dame de Paris Image 32: Notre-Dame de Paris \\"Paris\\"."}, {"url": "https://www.coe.int/en/web/interculturalcities/paris", "content": "Paris, France - Intercultural City - Intercultural Cities Programme Council of Europe Human Rights Human Rights Online resources Human Rights Online resources # Intercultural Cities Programme - What is an intercultural city? - Intercultural Regions - Index reports per city - Intercultural profiles 2. Intercultural Cities Programme 4. Paris # Paris, France - Intercultural City Paris is the capital and most populous city of France. The City of Paris has an area of 105\\u00a0km\\u00b2 and a population of 2,241,346 (2014 estimate). #### International Intercultural Cities Network - Paris Intercultural profile Intercultural Cities Index - Paris\\u00a0city official website - Paris Facebook page - Private office of the Secretary General - Online bookshop - Online resources **Council of Europe**,"}]'), is_error=False)

[08/07/25 23:35:29] INFO     Processing request of type CallToolRequest                                                        server.py:625
Result:
CallToolResult(content=[TextContent(type='text', text='{\n  "search_url": "https://restcountries.com/v3.1/name/United Kingdom",\n  "name": "United Kingdom",\n  "capital": "London",\n  "population": 67215293,\n  "currency": "GBP"\n}', annotations=None, meta=None)],
               structured_content=None,
               data=None,
               is_error=False)
```

---

# Activity #2

Create a [`math_server.py`](./math_server.py) and [`using-langgraph-stategraph.py`](./using-langgraph-stategraph.py) to illustrate a simple LangGraph application that interacts with the MCP Server - using Langchain MCP Adaptors.

Run the [`using-langgraph-stategraph.py`](./using-langgraph-stategraph.py):
```python
python using-langgraph-stategraph.py
```

And the below output is seen, as the [`using-langgraph-stategraph.py`](./using-langgraph-stategraph.py), calls two tools namely a `math` tool and a `roll-a-dice`, via two prompts that would trigger these tools:
```bash
[08/07/25 23:43:35] INFO     Processing request of type ListToolsRequest                                                       server.py:625
[08/07/25 23:43:35] INFO     Processing request of type ListToolsRequest                                                       server.py:625
[08/07/25 23:43:36] INFO     Processing request of type CallToolRequest                                                        server.py:625
                    INFO     Processing request of type ListToolsRequest                                                       server.py:625
[08/07/25 23:43:39] INFO     Processing request of type CallToolRequest                                                        server.py:625
                    INFO     Processing request of type ListToolsRequest                                                       server.py:625
[08/07/25 23:43:42] INFO     Processing request of type CallToolRequest                                                        server.py:625
[08/07/25 23:43:42] INFO     Processing request of type CallToolRequest                                                        server.py:625
[08/07/25 23:43:44] INFO     Processing request of type CallToolRequest                                                        server.py:625
                    INFO     Processing request of type ListToolsRequest                                                       server.py:625

Math response: {'messages': [HumanMessage(content="what's (3 + 5) x 12?", additional_kwargs={}, response_metadata={}, id='1da36a64-e556-458a-a915-3ded7d58eb55'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_d8Rbiq1sbxyxQiowYouwcSeH', 'function': {'arguments': '{"a":3,"b":5}', 'name': 'add'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 17, 'prompt_tokens': 158, 'total_tokens': 175, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_799e4ca3f1', 'id': 'chatcmpl-C23cdlpyyfaAJX7x6H1yBHKKvxPiP', 'service_tier': 'default', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--a69922b7-80a3-4682-974f-ec8956ff3553-0', tool_calls=[{'name': 'add', 'args': {'a': 3, 'b': 5}, 'id': 'call_d8Rbiq1sbxyxQiowYouwcSeH', 'type': 'tool_call'}], usage_metadata={'input_tokens': 158, 'output_tokens': 17, 'total_tokens': 175, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='8', name='add', id='d141caed-07dd-4b57-b196-4866a6a970e2', tool_call_id='call_d8Rbiq1sbxyxQiowYouwcSeH'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_FU9WHk6Z97zE2RuGF2BoFKlL', 'function': {'arguments': '{"a":8,"b":12}', 'name': 'multiply'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 17, 'prompt_tokens': 183, 'total_tokens': 200, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_799e4ca3f1', 'id': 'chatcmpl-C23cfJutbm8pYjTv1wdq5yOLkHL6S', 'service_tier': 'default', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--9c27c9e9-e83d-4555-b7a2-b49804404780-0', tool_calls=[{'name': 'multiply', 'args': {'a': 8, 'b': 12}, 'id': 'call_FU9WHk6Z97zE2RuGF2BoFKlL', 'type': 'tool_call'}], usage_metadata={'input_tokens': 183, 'output_tokens': 17, 'total_tokens': 200, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='96', name='multiply', id='afa848f5-441d-4152-a9db-7a67bc900187', tool_call_id='call_FU9WHk6Z97zE2RuGF2BoFKlL'), AIMessage(content='(3 + 5) x 12 = 8 x 12 = 96.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 20, 'prompt_tokens': 208, 'total_tokens': 228, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_799e4ca3f1', 'id': 'chatcmpl-C23chgyyarzthpqLmyqisEStuX3xT', 'service_tier': 'default', 'finish_reason': 'stop', 'logprobs': None}, id='run--65f32b16-69bf-441c-929f-f08897f1e876-0', usage_metadata={'input_tokens': 208, 'output_tokens': 20, 'total_tokens': 228, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}

Roll-a-dice response: {'messages': [HumanMessage(content='roll a dice, twice', additional_kwargs={}, response_metadata={}, id='b2e2a03b-d6e9-4c25-abc4-ee222ce55921'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_rYTElQpRWCrzMjQOzdMrXfXB', 'function': {'arguments': '{"notation": "d6"}', 'name': 'roll_dice'}, 'type': 'function'}, {'id': 'call_Sgj1jeRRLQCbPXJPl7CJsZSP', 'function': {'arguments': '{"notation": "d6"}', 'name': 'roll_dice'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 48, 'prompt_tokens': 151, 'total_tokens': 199, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_799e4ca3f1', 'id': 'chatcmpl-C23ci9dA4PzBFkgMbSzeifDXZ5i8z', 'service_tier': 'default', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--974f1c25-fac3-4542-8567-a98050b9feca-0', tool_calls=[{'name': 'roll_dice', 'args': {'notation': 'd6'}, 'id': 'call_rYTElQpRWCrzMjQOzdMrXfXB', 'type': 'tool_call'}, {'name': 'roll_dice', 'args': {'notation': 'd6'}, 'id': 'call_Sgj1jeRRLQCbPXJPl7CJsZSP', 'type': 'tool_call'}], usage_metadata={'input_tokens': 151, 'output_tokens': 48, 'total_tokens': 199, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content="Error: ToolException('Error executing tool roll_dice: Invalid dice notation')\n Please fix your mistakes.", name='roll_dice', id='df6628fc-3b09-4202-8e96-ba7b9631afaa', tool_call_id='call_rYTElQpRWCrzMjQOzdMrXfXB', status='error'), ToolMessage(content="Error: ToolException('Error executing tool roll_dice: Invalid dice notation')\n Please fix your mistakes.", name='roll_dice', id='c4047885-bc5a-4a3c-8b7a-47d36e9aab46', tool_call_id='call_Sgj1jeRRLQCbPXJPl7CJsZSP', status='error'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'call_6bh3bb1YaMqXlhrci94rzXbs', 'function': {'arguments': '{"notation":"1d6","num_rolls":2}', 'name': 'roll_dice'}, 'type': 'function'}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 23, 'prompt_tokens': 258, 'total_tokens': 281, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_799e4ca3f1', 'id': 'chatcmpl-C23ckp2b81IPBFuhFuuaLFHvVSkz2', 'service_tier': 'default', 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--b819fdf0-bea0-4d2a-9978-e14b6673fb76-0', tool_calls=[{'name': 'roll_dice', 'args': {'notation': '1d6', 'num_rolls': 2}, 'id': 'call_6bh3bb1YaMqXlhrci94rzXbs', 'type': 'tool_call'}], usage_metadata={'input_tokens': 258, 'output_tokens': 23, 'total_tokens': 281, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}), ToolMessage(content='Roll 1: ROLLS: 2 -> RETURNS: 2\nRoll 2: ROLLS: 3 -> RETURNS: 3', name='roll_dice', id='3b1717f7-b99f-4211-ab01-94d12c717974', tool_call_id='call_6bh3bb1YaMqXlhrci94rzXbs'), AIMessage(content="Here are your two dice rolls:\n- First roll: 2\n- Second roll: 3\n\nLet me know if you'd like to roll again or try a different dice!", additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 37, 'prompt_tokens': 321, 'total_tokens': 358, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-4.1-2025-04-14', 'system_fingerprint': 'fp_799e4ca3f1', 'id': 'chatcmpl-C23cmCkg32SiR1rd2o4nyIXmPj0r5', 'service_tier': 'default', 'finish_reason': 'stop', 'logprobs': None}, id='run--1c3a5241-3649-463f-9a5a-75f3284433e0-0', usage_metadata={'input_tokens': 321, 'output_tokens': 37, 'total_tokens': 358, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}})]}
```